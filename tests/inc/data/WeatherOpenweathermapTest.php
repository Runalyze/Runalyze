<?php

/**
 * Generated by PHPUnit_SkeletonGenerator 1.2.0 on 2013-03-17 at 16:05:13.
 */
class WeatherOpenweathermapTest extends PHPUnit_Framework_TestCase {

	/**
	 * @var WeatherOpenweathermap
	 */
	protected $object;

	/**
	 * Sets up the fixture, for example, opens a network connection.
	 * This method is called before a test is executed.
	 */
	protected function setUp() {
		$this->object = new WeatherOpenweathermap;

		if (!defined('CONF_PLZ'))
			define('CONF_PLZ', 'Kaiserslautern, de');
	}

	/**
	 * Tears down the fixture, for example, closes a network connection.
	 * This method is called after a test is executed.
	 */
	protected function tearDown() {
		
	}

	public function testEmptyValues() {
		$this->assertNull( $this->object->getTemperature() );
		$this->assertEquals( $this->object->getConditionAsString(), '' );
	}

	/**
	 * @covers WeatherOpenweathermap::loadForecast
	 * @covers WeatherOpenweathermap::setFromJSON
	 * @covers WeatherOpenweathermap::getConditionAsString
	 * @covers WeatherOpenweathermap::getTemperature
	 */
	public function testLoadForecast() {
		$this->object->setFromJSON('
			{
				"coord":{"lon":7.75,"lat":49.45},
				"sys":{"message":0.0221,"country":"DE","sunrise":1401334144,"sunset":1401391431},
				"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],
				"base":"cmc stations",
				"main":{"temp":17.17,"pressure":1013,"temp_min":16.11,"temp_max":18.2,"humidity":59},
				"wind":{"speed":1.76,"deg":313.5},
				"clouds":{"all":76},
				"dt":1401371226,
				"id":2894003,
				"name":"Kaiserslautern",
				"cod":200
			}');

		$this->assertEquals($this->object->getConditionAsString(), 'cloudy');
		$this->assertEquals($this->object->getTemperature(), 17.0);
	}
}
